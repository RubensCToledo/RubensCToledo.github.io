<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="witdh=device-width, initial-scale=1.0"/>
    <title>DoE</title>
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link rel="stylesheet" href="/css/style.css">
    <link rel="shortcut icon" href="images/test" type="image/x-icon"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.css" rel="stylesheet">

  </head>
    
  <body>
    <nav class="navbar">
      <div class="container">
        <div class="logo">
          <a href="index.html">
            <img src="images/logo.png" alt="logo">
          </a>
        </div>

        <div class="main-menu">
          <ul>
            <li>
              <a href="/index.html">Home</a>
            </li>
            <li>
              <a href="/pages/CV.html">CV</a>
            </li>
            <li>
              <a href="/pages/projects.html">Projects</a>
            </li>
            <li>
              <a href="/pages/publications.html">Publications</a>
            </li>
            <li>
              <a href="/pages/blog.html">Blog</a>
            </li>
            <li>
              <a href="/pages/about.html">About me</a>
            </li>
            <li>
              <a href="/pages/contact.html">Contact</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- projects -->
    <main>
      <h2>
        Design of Experiments projects
      </h2>
      <p>
        When dealing with experiments, it is not always possible to obtain a
        large number of data points or replicates due to constraints such as cost, 
        time, and logistics. In such cases, DoE techniques prove to be very useful. 
        When performing parametric studies, the goal is to understand how one or more 
        variables affect the outcome of a process. Below, I describe two case studies 
        where I applied different DoE techniques.
      </p>
      <h3>
        Complete Design $2^k$
      </h3>
      <p>
        In this design, I was investigating a sieving machine for sedimentary rock samples. 
        My goal was to characterize the particle size distribution and their respective amounts 
        in the samples. Data from previous users were inconsistent and did not provide clear 
        guidance on how to set the parameters for sample size, drying time, vibration intensity, 
        and sieving time.
      </p>
      <p>
        At the time, I was studying DoE techniques and decided to use a full factorial design. 
        Even though it requires a larger number of tests, I believe it is easier to understand 
        and interpret.
      </p>
      <p>
        After consulting various materials, I identified a sample size that aligns with best 
        practices for achieving good results with this machine. The next step was to determine 
        the remaining parameters. I came up with the following setup:
      </p>
      <table>
        <thead>
          <tr>
            <th>Parameter</th>
            <th>Coded variable</th>
            <th>Negative level</th>
            <th>Positive level</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Drying time (h)</td>
            <td>A</td>
            <td>2</td>
            <td>24</td>
          </tr>
          <tr>
            <td>Vibration intensity (%)</td>
            <td>B</td>
            <td>2</td>
            <td>80</td>
          </tr>
          <tr>
            <td>Sieving time (min)</td>
            <td>C</td>
            <td>3</td>
            <td>15</td>
          </tr>
        </tbody>
      </table>
      <p>
        The final design involved 3 parameters at 2 levels each. A total of 8 
        unique experiments were conducted, with each experiment repeated 3 times, 
        totaling 24 runs. The experimental matrix, including the results, is shown below:
      </p>
      
      <table class="widetable">
        <thead>
          <tr>
            <th>Sample</th>
            <th>Drying time (h)</th>
            <th>Vibration intensity (%)</th>
            <th>Sieving time (min)</th>
            <th>% of mass replicates 1</th>
            <th>% of mass replicates 2</th>
            <th>% of mass replicates 3</th>
            <th>Mean</th>
            <th>s²</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>2</td>
            <td>20</td>
            <td>3</td>
            <td>55.2</td>
            <td>60.6</td>
            <td>58.7</td>
            <td>58.2</td>
            <td>7.5</td>
          </tr>
          <tr>
            <td>2</td>
            <td>24</td>
            <td>20</td>
            <td>3</td>
            <td>58.1</td>
            <td>54.5</td>
            <td>51.5</td>
            <td>54.7</td>
            <td>11.1</td>
          </tr>
          <tr>
            <td>3</td>
            <td>2</td>
            <td>80</td>
            <td>3</td>
            <td>61.7</td>
            <td>61.0</td>
            <td>61.8</td>
            <td>61.5</td>
            <td>0.2</td>
          </tr>
          <tr>
            <td>4</td>
            <td>24</td>
            <td>80</td>
            <td>3</td>
            <td>60.2</td>
            <td>60.1</td>
            <td>61.2</td>
            <td>60.5</td>
            <td>0.3</td>
          </tr>
          <tr>
            <td>5</td>
            <td>2</td>
            <td>20</td>
            <td>15</td>
            <td>55.8</td>
            <td>58.1</td>
            <td>59.7</td>
            <td>57.9</td>
            <td>3.7</td>
          </tr>
          <tr>
            <td>6</td>
            <td>24</td>
            <td>20</td>
            <td>15</td>
            <td>56.1</td>
            <td>56.3</td>
            <td>55.7</td>
            <td>56.0</td>
            <td>0.2</td>
          </tr>
          <tr>
            <td>7</td>
            <td>2</td>
            <td>80</td>
            <td>15</td>
            <td>62.3</td>
            <td>61.6</td>
            <td>61.9</td>
            <td>62.0</td>
            <td>0.1</td>
          </tr>
          <tr>
            <td>8</td>
            <td>24</td>
            <td>80</td>
            <td>15</td>
            <td>61.8</td>
            <td>61.2</td>
            <td>61.9</td>
            <td>61.6</td>
            <td>0.1</td>
          </tr>
        </tbody>
      </table>
        
      <p>
        By analyzing the effect of each parameter on the final results, as shown in the table below:
      </p>
      <table>
        <thead>
          <tr>
            <th>Parameter order</th>
            <th>Parameter</th>
            <th>Effect</th>
            <th>Relevancy</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td rowspan="4">1°</td>
            <td>A</td>
            <td>-1.68</td>
            <td>not relevant</td>
          </tr>
          <tr>
            <td>B</td>
            <td>4.72</td>
            <td>relevant</td>
          </tr>
          <tr>
            <td>C</td>
            <td>0.65</td>
            <td>not relevant</td>
          </tr>
          <tr>
            <td>AB</td>
            <td>1.00</td>
            <td>not relevant</td>
          </tr>
          <tr>
            <td rowspan="2">2°</td>
            <td>BC</td>
            <td>0.12</td>
            <td>not relevant</td>
          </tr>
          <tr>
            <td>AC</td>
            <td>0.59</td>
            <td>not relevant</td>
          </tr>
          <tr>
            <td>3°</td>
            <td>ABC</td>
            <td>-0.26</td>
            <td>not relevant</td>
          </tr>
        </tbody>
      </table>
      <p>
        These results have shown me that the only factor impacting my tests was the 
        vibration intensity, which allowed me to conduct the tests more quickly and 
        with less concern about drying the samples. While the DoE technique is very 
        useful, careful consideration and critical analysis are essential when 
        making decisions. Below is a image of the analysis conducted for 7 replicates, 
        following the parameters identified in this study.
      </p>
      <img src="/images/DoE/distri_dolomitico.png" alt="Distribution dolomite">
      <p>
        In this case, the fluctuation observed at lower particle sizes is acceptable. 
        However, it's important to remember that this analysis was based on 3 replicates, 
        which may not fully capture the complete effect of each variable. Increasing the 
        number of replicates could result in more than 100 tests, which is typically not 
        feasible for various reasons. For this reason, more robust techniques should be 
        applied when conducting parametric studies.
      </p>
      <p>
        A example code of this technique can be downloaded here:
      </p>

      <h4><a href="/backup/Fatorial completo.ipynb">Download here</a></h4> 

      <h3>Composite Central Design</h3>
      <p>
        In this project I was trying to optimize a variable on a process. When dealing 
        with a somewhat know process, it is possible to apply a second degree model to 
        describe the desirable output. In this example I was investigating the effect of 
        temperature and residence time of some samples during a reaction. I wish to 
        understand what are the optimal configuration to conduct this test if I want 
        to have the maximum yield output which in this case is reaction conversion. 
        The table bellow shows the configuration used in this project:
      </p>

      <table class="widetable">
        <thead>
          <tr>
            <th>Sample</th>
            <th>Time (min)</th>
            <th>Temperature (°C)</th>
            <th>Energy spent (kJ)</th>
            <th>% CO₂ mass captured (%mg)</th>
            <th>y (% mg/kJ)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>5</td>
            <td>400</td>
            <td>8.04</td>
            <td>6.90</td>
            <td>0.86</td>
          </tr>
          <tr>
            <td>2</td>
            <td>10</td>
            <td>400</td>
            <td>8.26</td>
            <td>10.58</td>
            <td>1.28</td>
          </tr>
          <tr>
            <td>3</td>
            <td>5</td>
            <td>550</td>
            <td>8.16</td>
            <td>14.47</td>
            <td>1.77</td>
          </tr>
          <tr>
            <td>4</td>
            <td>10</td>
            <td>550</td>
            <td>8.52</td>
            <td>25.99</td>
            <td>3.05</td>
          </tr>
          <tr>
            <td>5</td>
            <td>7.5</td>
            <td>475</td>
            <td>8.39</td>
            <td>22.36</td>
            <td>2.66</td>
          </tr>
          <tr>
            <td>6</td>
            <td>7.5</td>
            <td>475</td>
            <td>8.35</td>
            <td>24.40</td>
            <td>2.92</td>
          </tr>
          <tr>
            <td>7</td>
            <td>7.5</td>
            <td>475</td>
            <td>8.32</td>
            <td>19.96</td>
            <td>2.42</td>
          </tr>
          <tr>
            <td>8</td>
            <td>7.5</td>
            <td>475</td>
            <td>8.29</td>
            <td>23.42</td>
            <td>2.82</td>
          </tr>
          <tr>
            <td>9</td>
            <td>4</td>
            <td>475</td>
            <td>8.08</td>
            <td>18.51</td>
            <td>2.29</td>
          </tr>
          <tr>
            <td>10</td>
            <td>11</td>
            <td>475</td>
            <td>8.46</td>
            <td>19.78</td>
            <td>2.34</td>
          </tr>
          <tr>
            <td>11</td>
            <td>7.5</td>
            <td>370</td>
            <td>8.16</td>
            <td>5.28</td>
            <td>0.65</td>
          </tr>
          <tr>
            <td>12</td>
            <td>7.5</td>
            <td>580</td>
            <td>8.50</td>
            <td>25.00</td>
            <td>2.94</td>
          </tr>
        </tbody>
      </table>
    <p>
      The first difference of the previous configuration are the replicates. 
      On CCD we are exploring the result plane, where the first top experiments 
      on the table represent a "square" within high and low levels (blue dots). 
      Replicates are all positioned on the center of the "square" and they are used 
      to estimate the deviation and extrapolated the uncertainty found on the center 
      for the rest of the results (orange central points). The bottom part of the 
      table are the extrapolation, a second square is juxtaposed above the first in 
      order to extrapolate the investigated experiments (purple dots). The image bellow 
      illustrate this configuration.
    </p>

    <p>
      The result of this investigation is two 3D plot (bellow) that indicates which are the 
      best combination of the investigated variables to results.
    </p>
    <p>
      The code example can be found here.
    </p>

    <p>
      It is possible to use an ANOVA to find also the relevant parameters and their combination:
    </p>
    <table  >
      <thead>
        <tr>
          <th>Source</th>
          <th>DF</th>
          <th>Adj SS</th>
          <th>Adj MS</th>
          <th>F-value</th>
          <th>p-value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Model</td>
          <td>5</td>
          <td>6.9841</td>
          <td>1.39683</td>
          <td>12.10</td>
          <td>0.004</td>
        </tr>
        <tr>
          <td>Linear</td>
          <td>2</td>
          <td>4.7699</td>
          <td>2.38497</td>
          <td>20.66</td>
          <td>0.002</td>
        </tr>
        <tr>
          <td>Time</td>
          <td>1</td>
          <td>0.3956</td>
          <td>0.39557</td>
          <td>3.43</td>
          <td>0.114</td>
        </tr>
        <tr>
          <td>Temperature</td>
          <td>1</td>
          <td>4.3744</td>
          <td>4.37437</td>
          <td>37.90</td>
          <td>0.001</td>
        </tr>
        <tr>
          <td>Square</td>
          <td>2</td>
          <td>2.0293</td>
          <td>1.01465</td>
          <td>8.79</td>
          <td>0.016</td>
        </tr>
        <tr>
          <td>Time²</td>
          <td>1</td>
          <td>0.4791</td>
          <td>0.47905</td>
          <td>4.15</td>
          <td>0.088</td>
        </tr>
        <tr>
          <td>Temperature²</td>
          <td>1</td>
          <td>1.8332</td>
          <td>1.83319</td>
          <td>15.88</td>
          <td>0.007</td>
        </tr>
        <tr>
          <td>2-Way Int.</td>
          <td>1</td>
          <td>0.1849</td>
          <td>0.18490</td>
          <td>1.60</td>
          <td>0.253</td>
        </tr>
        <tr>
          <td>Time*Temperature</td>
          <td>1</td>
          <td>0.1849</td>
          <td>0.18490</td>
          <td>1.60</td>
          <td>0.253</td>
        </tr>
        <tr>
          <td>Error</td>
          <td>6</td>
          <td>0.6925</td>
          <td>0.11542</td>
          <td>-</td>
          <td>-</td>
        </tr>
        <tr>
          <td>Lack of fit</td>
          <td>3</td>
          <td>0.5498</td>
          <td>0.18328</td>
          <td>3.85</td>
          <td>0.149</td>
        </tr>
        <tr>
          <td>Pure error</td>
          <td>3</td>
          <td>0.1427</td>
          <td>0.04757</td>
          <td>-</td>
          <td>-</td>
        </tr>
        <tr>
          <td>Total</td>
          <td>11</td>
          <td>7.6767</td>
          <td>-</td>
          <td>-</td>
          <td>-</td>
        </tr>
      </tbody>
    </table>
    
    </main>
   <!--Footer-->
   <footer class="footer bg-black">
    <div class="container">
      <div class="footer-grid">
        <div>
          <a href="index.html">
            <img src="images/logo.png" alt="logo">
          </a>
          <a href="https://www.linkedin.com/in/rubens-coutinho-toledo-2011bb1bb" target="_blank" rel="noopener noreferrer">
            <i class="fab fa-linkedin"></i>
          </a>
          <a href="https://www.instagram.com/rubenscoutinhotoledo/" target="_blank" rel="noopener noreferrer">
            <i class="fab fa-instagram"></i>
          </a>
          <a href="https://wa.me/5516997882970" target="_blank" rel="noopener noreferrer">
            <i class="fab fa-whatsapp"></i>
          </a>
        </div>
        <div>
          <h4>Work related</h4>
          <ul>
            <li><a href="../pages/CV.html">CV</a></li>
            <li><a href="../pages/projects.html">Projects</a></li>
            <li><a href="../pages/publications.html">Publications</a></li>
          </ul>
        </div>
        <div>
          <h4>Personal info</h4>
          <ul>
            <li><a href="../pages/about.html">About me</a></li>
            <li><a href="../pages/blog.html">Blog</a></li>
          </ul>
        </div>
        <div>
          <h4>Contact</h4>
          <ul>
            <li><a href="mailto:rubenstoledo.toledo@gmail.com">rubenstoledo.toledo@gmail.com</a></li>
          </ul>
        </div>
      </div>
    </div>
   </footer>
    <script src="js/main.js"></script>
  	
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
  </body>
</html>